---
import Layout from '../../layouts/Layout.astro';
import PlayerCard from '../../components/ranking/PlayerCard.astro';

// TODO: Replace with actual user data from backend
const userProfile = {
  name: 'John Doe',
  username: '@johndoe',
  score: 9500,
  avatarUrl: 'https://picsum.photos/id/64/150/150',
  favoriteColor: '#FFD93D',
  stats: {
    gamesPlayed: 150,
    gamesWon: 98,
    totalPoints: 12500,
    averageScore: 83,
    rank: 15,
  },
  achievements: [
    {
      title: 'First Victory',
      description: 'Won your first game',
      icon: 'üèÜ',
      date: '2023-01-15',
    },
    {
      title: 'Knowledge Master',
      description: 'Answered 100 questions correctly',
      icon: 'üéì',
      date: '2023-02-01',
    },
    {
      title: 'Speed Runner',
      description: 'Answered 10 questions in less than 1 minute',
      icon: '‚ö°',
      date: '2023-02-15',
    },
  ],
  recentGames: [
    {
      date: '2023-03-01',
      category: 'History',
      score: 850,
      position: 1,
    },
    {
      date: '2023-03-02',
      category: 'Science',
      score: 750,
      position: 2,
    },
    {
      date: '2023-03-03',
      category: 'Geography',
      score: 900,
      position: 1,
    },
  ],
};
---

<Layout title={`Pregunta - ${userProfile.name}'s Profile`} description="Your profile on Pregunta">
  <div class="container mx-auto px-4 py-8">
    <!-- Profile Header -->
    <div class="mb-8">
      <PlayerCard {...userProfile} />
    </div>

    <!-- Stats Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-soft p-4">
        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Games Played</h3>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{userProfile.stats.gamesPlayed}</p>
      </div>
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-soft p-4">
        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Games Won</h3>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{userProfile.stats.gamesWon}</p>
      </div>
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-soft p-4">
        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Points</h3>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{userProfile.stats.totalPoints}</p>
      </div>
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-soft p-4">
        <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Average Score</h3>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{userProfile.stats.averageScore}</p>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- Achievements -->
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-soft p-6">
        <h2 class="text-2xl font-display font-bold text-gray-900 dark:text-white mb-4">Achievements</h2>
        <div class="space-y-4">
          {userProfile.achievements.map(achievement => (
            <div class="flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
              <div class="text-3xl">{achievement.icon}</div>
              <div>
                <h3 class="font-medium text-gray-900 dark:text-white">{achievement.title}</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">{achievement.description}</p>
                <p class="text-xs text-gray-400 dark:text-gray-500 mt-1">{new Date(achievement.date).toLocaleDateString()}</p>
              </div>
            </div>
          ))}
        </div>
      </div>

      <!-- Recent Games -->
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-soft p-6">
        <h2 class="text-2xl font-display font-bold text-gray-900 dark:text-white mb-4">Recent Games</h2>
        <div class="space-y-4">
          {userProfile.recentGames.map(game => (
            <div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
              <div>
                <h3 class="font-medium text-gray-900 dark:text-white">{game.category}</h3>
                <p class="text-sm text-gray-500 dark:text-gray-400">{new Date(game.date).toLocaleDateString()}</p>
              </div>
              <div class="text-right">
                <p class="text-lg font-bold text-gray-900 dark:text-white">{game.score} pts</p>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                  {game.position}{game.position === 1 ? 'st' : game.position === 2 ? 'nd' : game.position === 3 ? 'rd' : 'th'} place
                </p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</Layout>
